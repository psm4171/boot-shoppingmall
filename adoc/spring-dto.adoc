# Spring - DTO를 사용하는 이유

DTO : 계층간 데이터 교환을 위해 사용하는 객체이다

DTO와 Entity는 거의 똑같은데 왜 변환해서 사용하고, 언제 DTO가 필요한가?

1. Entity클래스와 거의 유사한 형태임에도 DTO 클래스를 추가로 생성하는 이유는 Entity 클래스가 데이터베이스와 맞닿은 핵심 클래스이기 때문이다.

- Entity 클래스를 기준으로 테이블이 생성되고 스키마가 변경되는데, 화면 변경과 같은 사소한 기능 변경을 위해 테이블과 연결된 Entity 클래스를 변경하는 것은 너무 큰 변경이다.

- 또한 View Layer와 DB Layer 역할 분리를 철저히 하는 것이 좋은데, 실제로 Controller에서 결과값으로 여러 테이블을 조인해서 줘야 할 경우가 빈번하기 때문에 Entity 클래스만으로 표현하기 어려운 경우가 많다.

1. 다양한 비즈니스 로직과 요구사항에 대해 유연하게 대응할 수 있다.

- 파라미터로 엔티티 자체를 받게 되면 엔티티에서 정해진 포맷에 맞춰 개발 해야한다. 하지만 DTO는 각 비즈니스 로직에 맞춘 필드들만 생성함으로써 DTO를 보면 어떤 값들이 매핑되는지 쉽게 파악할 수 있고, 만약 API 설계 상황에서 필드에 다른 이름을 부여하거나 하는 상황에서도 유연하게 대처할 수 있다.

1. Controller와 Service 사이에서 강한 의존을 방지하기 위해 DTO를 사용한다.

- 서비스가 받고 싶은 파라미터가 컨트롤러에게 종속적이게 되면 서비스가 컨트롤러 패키지에게 의존하게 된다. 따라서 이를 방지하기 위해서라도 서비스가 원하는 포맷에 맞춰 컨트롤러 딴에서 DTO를 통해 그 포맷을 맞춰주는 것이다.

1. Service 레이어가 모듈에 분리되어버리면 해당 타입을 쓸 수 없게 된다.

1. 트랜잭션으로 처리되어야 하는 DTO 항목이, 항상 요청으로 들어온 결과값과 동일하지 않을 수 있다.

결론:

서비스는 자신이 원하는 포맷을 기다리고 있으면 되고 컨트롤러에서 DTO를 생성하여 서비스에게 넘겨주면 된다. 그리고 서비스는 해당 DTO를 비즈니스 로직을 거쳐 DTO를 다시 던져주면 된다.